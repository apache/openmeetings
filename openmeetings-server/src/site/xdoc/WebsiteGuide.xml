<?xml version="1.0" encoding="UTF-8"?>
<!--
   Licensed under the Apache License, Version 2.0 (the "License");
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
 -->
<document xmlns="http://maven.apache.org/XDOC/2.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/XDOC/2.0 http://maven.apache.org/xsd/xdoc-2.0.xsd">
	<properties>
		<title>Website Guide</title>
		<author email="dev@openmeetings.apache.org">Apache OpenMeetings Team</author>
	</properties>

	<body>

		<section name="How to update Apache OpenMeetings website">
			<subsection name="Required tools">
				<div>
					<ul>
						<li>Sun JDK7</li>
						<li>Apache Maven (3.3.9 or later)</li>
					</ul>
				</div>
			</subsection>
			
			<subsection name="Introduction">
				<div>
					<p>
						The Apache OpenMeetings HTML websites are generated from XML files. 
						You edit the XML files, run the MAVEN command <source><![CDATA[mvn install -P allModules,unpacked]]></source> that generates the HTML files 
						and then you copy generated HTML files into appropriate place and commit to SVN both: XML and HTML files.
					</p>
					<p>
						The website itself uses JQuery to generate the menu, the pop images and the image slider at the landing page.
					</p>
				</div>
			</subsection>

			<subsection name="Editing the website">
				<div>
					<p>
						OpenMeetings website (<a href="http://openmeetings.apache.org/">http://openmeetings.apache.org/</a>) is a copy from the SVN repository.<br />
						The file in the SVN to be synced are at:
						<br />
						<a href="http://svn.apache.org/repos/asf/openmeetings/trunk/site/">http://svn.apache.org/repos/asf/openmeetings/trunk/site/</a><br/>
					</p>
					
					<div>
						To update the website you need to checkout trunk:<br />
						<a href="https://svn.apache.org/repos/asf/openmeetings/application/trunk/">https://svn.apache.org/repos/asf/openmeetings/application/trunk/</a> <br/>
						edit the files in the folder <tt>openmeetings-server/src/site</tt><br/>
						then you run the command:
						<source><![CDATA[mvn install -Dunpacked=true]]></source>
						control the output locally in the folder <tt>openmeetings-server/target/server/webapps/openmeetings/docs/</tt><br/>
						copy site contents into target folder: <source><![CDATA[cp -r openmeetings-server/target/server/webapps/openmeetings/docs/* ../site/]]></source>
						And then commit your changes into the SVN <i>both</i> the edited xml(s) and generated html files.
					</div>
					
					<p>
						The public website is automatically synced with the SVN repository.<br/>
						Changes to the SVN should be immediately synced to the production website.<br/>
						If not you might login to people.apache.org,<br/>
						cd to <tt>/www/openmeetings.apache.org/content/</tt><br/>
						and run the linux command "touch" on the files that need to be synced
					</p>
				</div>
			</subsection>
			
			<subsection name="Adding a new menu entry">
				<div>
					To add a new menu entry in the left side panel you need to modify the file: 
					<br/>
					<tt>openmeetings-server/src/site/site.xml</tt>
				</div>
			</subsection>

		</section>

	</body>

</document>
